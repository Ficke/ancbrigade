{% extends "base.html" %}

{% block body %}

   <!-- Main hero unit for a primary marketing message or call to action -->
  	<div id="masthead">
  		<div class="container">
  			<div class="row">
  				<h1>ANC {{anc}}</h1>
				<div style="text-align: center">{{info.neighborhoods}}</div>
  			</div>
  		</div><!-- /container -->
  	</div><!-- /masthead -->
  	
	<div class="container">
		<div class="row">
			<div class="span7">
			
				<h2>Commissioners</h2>
	
				<ul>
					{% for smd in info.smd_list %}
					<li>{{ smd.first_name }} {{ smd.last_name }}<br>
					SMD {{ smd.smd_number }}, {{ smd.neighborhoods }}</li>
					{% endfor %}
				</ul>
					
				<h2>{{ anc }}'s Recent Documents</h2>
				
			</div><!-- /column -->
		
			<div class="span5">
				
				<div id="map_canvas"> </div>
				
					<h2>What&rsquo;s in ANC {{ anc }}</h2>
					<!-- demographic info -->
					
	
				<!-- documents -->
	
			</div><!-- /column -->
		</div>
  	</div><!-- /body -->

{% endblock %}


{% block scripts %}
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

	<script type="text/javascript">
		var map = null;
		
		function on_resize() {
			var cw = $('#map_canvas').parent().width();
			var wht = $(window).height() / 2;
			$('#map_canvas').css({ width: cw, height: cw < wht ? cw : wht });
		}
		
		function initialize() {
			on_resize();
			$(window).resize(on_resize);
		
			try {
				google;
			} catch (err) {
				return; // We're working off-line and don't have access to Google Maps.
			}
			
			var sw = new google.maps.LatLng({{info.bounds.1}}, {{info.bounds.0}});
			var ne = new google.maps.LatLng({{info.bounds.3}}, {{info.bounds.2}});
			var bounds = new google.maps.LatLngBounds(sw, ne);
			
			var myOptions = {
				zoom: 13,
				center: bounds.getCenter(),
				mapTypeId: google.maps.MapTypeId.ROADMAP,
				panControl: false,
				zoomControl: true,
				mapTypeControl: false,
				scaleControl: true,
				streetViewControl: false,
				styles: [ { "featureType": "poi.park", "elementType": "geometry.fill", "stylers": [ { "visibility": "off" } ] } ]
				};
			map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
			map.fitBounds(bounds);
			
			add_overlay(map, "dc-ward-2013", 8, 12);
			add_overlay(map, "dc-anc-2013", 13, 14);
			add_overlay(map, "dc-anc-2013-outlines", 15, 20);
			add_overlay(map, "dc-smd-2013-outlines", 13, 14);
			add_overlay(map, "dc-smd-2013", 15, 20);
		}

		// Add a tile overlay for this layer.
		function add_overlay(map, layer, minzoom, maxzoom, opacity) {
			if (!opacity) opacity = 1.0;
			var tileimgformat = 'png';
			if (navigator.appName == 'Microsoft Internet Explorer' && new RegExp("MSIE [678]").exec(navigator.userAgent)) tileimgformat = 'gif';
			
			var overlay = new google.maps.ImageMapType({
			  getTileUrl: function(coord, zoom) {
				  if (maxzoom && zoom > maxzoom) return null; // minZoom, maxZoom ineffectual below?
				  if (minzoom && zoom < minzoom) return null;
				  return "http://gis.govtrack.us/map/tiles/" + layer + "/" + zoom + "/" + coord.x + "/" + coord.y + "." + tileimgformat + "?gen=8";
			  },
			  tileSize: new google.maps.Size(256, 256),
			  isPng: tileimgformat == 'png',
			  
			  minZoom: minzoom,
			  maxZoom: maxzoom,
			  opacity: (tileimgformat == 'png' ? .8 : .25) * opacity
			});
			map.overlayMapTypes.insertAt(0, overlay);
		}
		
	</script>
{% endblock %}	